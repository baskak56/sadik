package com.example.myapplication.ui.dashboard

import android.content.Intent
import android.os.Bundle
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import androidx.appcompat.widget.SearchView
import androidx.fragment.app.Fragment
import androidx.recyclerview.widget.GridLayoutManager
import androidx.recyclerview.widget.RecyclerView
import com.example.gardenapp.ItemAdapter
import com.example.myapplication.R
import com.example.myapplication.databinding.FragmentDashboardBinding

class DashboardFragment : Fragment() {

    private var _binding: FragmentDashboardBinding? = null
    private val binding get() = _binding!!

    private lateinit var itemList: List<Item>
    private lateinit var adapter: ItemAdapter

    override fun onCreateView(
        inflater: LayoutInflater, container: ViewGroup?,
        savedInstanceState: Bundle?
    ): View {
        _binding = FragmentDashboardBinding.inflate(inflater, container, false)
        val root: View = binding.root

        val recyclerView: RecyclerView = binding.recyclerView

        itemList = listOf(

            Item(
                R.drawable.defaultpomidor, "Помидор", 25, false, "Популярный овощ для теплиц и открытого грунта", R.drawable.detailpomidor,
                emptyMap(), null, "Овощ", "Март - Апрель", "Рассадой", 1, 50, 70,
                "Умеренный", "Солнечное", "Комплексные", "20-25°C", "90-120 дней", "При покраснении",
                "Совместим с базиликом", "Фитофтора", "Обработка семян", "7-10 дней", "Теплолюбив",
                "Пасынкование", "Засуха", "Рыхлая", "5.5-6.5", "После бобовых", "Средняя полоса, Юг"
            ),

            Item(
                R.drawable.defaultogurec, "Огурец", 20, false, "Сочный овощ для салатов и засолки", R.drawable.detailogurec,
                emptyMap(), null, "Овощ", "Апрель - Май", "Семенами/рассадой", 2, 30, 50,
                "Обильный", "Полутень/солнце", "Органические", "22-28°C", "40-60 дней", "Молодые плоды",
                "Совместим с кукурузой", "Мучнистая роса", "Прогревание", "5-7 дней", "Боится заморозков",
                "Подвязка", "Холодная вода", "Плодородная", "6.0-6.8", "После лука", "Все регионы (в теплицах)"
            ),


            Item(
                R.drawable.defaultmorkov, "Морковь", 15, false, "Корнеплод с высоким содержанием каротина", R.drawable.detailmorkov,
                emptyMap(), null, "Корнеплод", "Апрель - Май", "Семенами", 1, 5, 25,
                "Умеренный", "Солнечное", "Калийные", "15-20°C", "70-100 дней", "При достижении размера",
                "Совместима с луком", "Морковная муха", "Замачивание", "10-14 дней", "Не любит загущения",
                "Прореживание", "Тяжелая почва", "Песчаная", "6.0-7.0", "После картофеля", "Все регионы"
            ),


            Item(
                R.drawable.defaultkartofel, "Картофель", 10, false, "Основной пищевой продукт", R.drawable.detailkartofel,
                emptyMap(), null, "Клубнеплод", "Май", "Клубнями", 3, 60, 80,
                "Редкий", "Солнечное", "Фосфорные", "15-20°C", "80-120 дней", "После цветения",
                "Совместим с бобами", "Колорадский жук", "Проращивание", "14-21 день", "Чувствителен к фитофторе",
                "Окучивание", "Переувлажнение", "Рыхлая", "5.0-6.0", "После капусты", "Все регионы"
            ),


            Item(
                R.drawable.defaultkapusta, "Капуста белокочанная", 18, false, "Популярный овощ для квашения", R.drawable.detailkapusta,
                emptyMap(), null, "Овощ", "Апрель - Май", "Рассадой", 1, 40, 60,
                "Обильный", "Солнечное", "Азотные", "15-20°C", "90-120 дней", "При плотном кочане",
                "Совместима с укропом", "Капустная совка", "Закаливание", "7-10 дней", "Холодостойкая",
                "Рыхление", "Недостаток влаги", "Плодородная", "6.5-7.0", "После огурцов", "Средняя полоса, Сибирь"
            ),


            Item(
                R.drawable.defaultluk, "Лук репчатый", 12, false, "Острый овощ для приготовления блюд", R.drawable.detailluk,
                emptyMap(), null, "Овощ", "Апрель", "Севком/семенами", 1, 10, 30,
                "Умеренный", "Солнечное", "Фосфорно-калийные", "15-25°C", "90-120 дней", "После полегания пера",
                "Совместим с морковью", "Луковая муха", "Обеззараживание", "10-14 дней", "Не любит кислую почву",
                "Прополка", "Переувлажнение", "Супесчаная", "6.0-7.0", "После тыквенных", "Все регионы"
            ),


            Item(
                R.drawable.defaultchesnok, "Чеснок", 8, false, "Острый овощ с антисептическими свойствами", R.drawable.detailchesnok,
                emptyMap(), null, "Овощ", "Октябрь/Апрель", "Зубчиками", 1, 5, 20,
                "Редкий", "Солнечное", "Калийные", "15-20°C", "90-150 дней", "При пожелтении листьев",
                "Совместим с клубникой", "Чесночный клещ", "Обработка фунгицидом", "7-10 дней", "Зимостойкий (озимый)",
                "Удаление стрелок", "Застой воды", "Рыхлая", "6.0-7.0", "После томатов", "Все регионы"
            ),


            Item(
                R.drawable.defaultsvekla, "Свекла", 14, false, "Сладкий корнеплод для борщей и салатов", R.drawable.detailsvekla,
                emptyMap(), null, "Корнеплод", "Май", "Семенами", 1, 8, 25,
                "Умеренный", "Солнечное", "Борные", "16-22°C", "80-100 дней", "Диаметр 5-10 см",
                "Совместима с капустой", "Свекловичная блошка", "Замачивание", "10-14 дней", "Не любит кислые почвы",
                "Прореживание", "Недостаток бора", "Суглинистая", "6.0-7.5", "После лука", "Все регионы"
            ),


            Item(
                R.drawable.defaulttykva, "Тыква", 5, false, "Крупный овощ с полезной мякотью", R.drawable.detailtykva,
                emptyMap(), null, "Овощ", "Май", "Семенами/рассадой", 3, 80, 120,
                "Обильный", "Солнечное", "Органические", "20-25°C", "90-120 дней", "После затвердения коры",
                "Совместима с кукурузой", "Тыквенная моль", "Прогревание", "7-10 дней", "Теплолюбива",
                "Прищипка плетей", "Холодная почва", "Плодородная", "6.0-6.8", "После картофеля", "Южные регионы"
            ),


            Item(
                R.drawable.defaultkabachok, "Кабачок", 7, false, "Летний овощ для жарки и консервации", R.drawable.detailkabachok,
                emptyMap(), null, "Овощ", "Май - Июнь", "Семенами", 2, 40, 60,
                "Умеренный", "Солнечное", "Комплексные", "18-25°C", "45-60 дней", "Молодые плоды (15-20 см)",
                "Совместим с фасолью", "Слизни", "Замачивание", "5-7 дней", "Боится заморозков",
                "Сбор регулярный", "Переросшие плоды", "Рыхлая", "6.0-6.8", "После зелени", "Все регионы"
            ),


            Item(
                R.drawable.defaultperec, "Перец сладкий", 22, false, "Теплолюбивый овощ для салатов и фаршировки", R.drawable.detailperec,
                emptyMap(), null, "Овощ", "Февраль - Март", "Рассадой", 1, 60, 80,
                "Регулярный", "Солнечное", "Калийные", "22-28°C", "100-140 дней", "При технической спелости",
                "Совместим с базиликом", "Тля", "Обработка стимулятором", "10-14 дней", "Требует тепла",
                "Формировка куста", "Резкие перепады температур", "Плодородная", "6.0-6.8", "После огурцов", "Южные регионы, теплицы"
            ),


            Item(
                R.drawable.defaultredis, "Редис", 5, false, "Ранний корнеплод с острым вкусом", R.drawable.detailredis,
                emptyMap(), null, "Корнеплод", "Апрель - Сентябрь", "Семенами", 1, 5, 25,
                "Частый", "Солнечное/полутень", "Азотные", "15-20°C", "20-30 дней", "Диаметр 2-3 см",
                "Совместим с салатом", "Крестоцветная блошка", "Замачивание", "3-5 дней", "Холодостойкий",
                "Прореживание", "Жара", "Рыхлая", "6.0-7.0", "После тыквенных", "Все регионы"
            ),


            Item(
                R.drawable.defaultgoroh, "Горох", 10, false, "Бобовая культура с сладкими стручками", R.drawable.detailgoroh,
                emptyMap(), null, "Бобовые", "Апрель - Май", "Семенами", 1, 5, 15,
                "Умеренный", "Солнечное", "Фосфорные", "12-18°C", "60-90 дней", "Молодые стручки",
                "Совместим с морковью", "Гороховая зерновка", "Замачивание", "7-10 дней", "Холодостойкий",
                "Подвязка", "Засуха", "Суглинистая", "6.0-7.0", "После картофеля", "Все регионы"
            ),

            Item(
                R.drawable.defaultukrop, "Укроп", 3, false, "Ароматная зелень для салатов и супов", R.drawable.detailukrop,
                emptyMap(), null, "Зелень", "Апрель - Август", "Семенами", 1, 5, 20,
                "Умеренный", "Солнечное", "Азотные", "15-20°C", "30-40 дней", "До цветения",
                "Совместим с капустой", "Тля", "Замачивание", "10-14 дней", "Самосев",
                "Прореживание", "Загущение", "Рыхлая", "5.5-7.0", "После лука", "Все регионы"
            ),

            Item(
                R.drawable.defaultpetrushka, "Петрушка", 5, false, "Ароматная зелень для салатов и супов", R.drawable.detailpetrushka,
                emptyMap(), null, "Зелень", "Апрель - Июль", "Семенами", 1, 5, 25,
                "Умеренный", "Солнечное/полутень", "Азотные", "15-20°C", "70-90 дней", "По мере роста листьев",
                "Совместима с томатами", "Морковная листоблошка", "Замачивание", "14-21 день", "Холодостойкая",
                "Прореживание", "Засуха", "Рыхлая", "5.5-7.0", "После капусты", "Все регионы"
            ),
            Item(
                R.drawable.defaultselderey, "Сельдерей", 10, false, "Овощ с пряным ароматом для супов и салатов", R.drawable.detailselderey,
                emptyMap(), null, "Овощ", "Февраль - Март", "Рассадой", 1, 60, 80,
                "Обильный", "Солнечное", "Азотные", "15-22°C", "120-180 дней", "При достижении размера",
                "Совместим с капустой", "Сельдерейная муха", "Замачивание", "10-14 дней", "Долгий вегетационный период",
                "Окучивание (корневой)", "Недостаток влаги", "Плодородная", "6.0-7.0", "После тыквенных", "Средняя полоса, Юг"
            ),
            Item(
                R.drawable.defaultredka, "Редька", 8, false, "Острый корнеплод для салатов и зимнего хранения", R.drawable.detailredka,
                emptyMap(), null, "Корнеплод", "Апрель - Июль", "Семенами", 1, 5, 30,
                "Умеренный", "Солнечное", "Калийные", "18-22°C", "60-80 дней", "Диаметр 5-7 см",
                "Совместима с горохом", "Крестоцветная блошка", "Замачивание", "5-7 дней", "Холодостойкая",
                "Прореживание", "Жара", "Рыхлая", "6.0-7.0", "После картофеля", "Все регионы"
            ),
            Item(
                R.drawable.defaultrepa, "Репа", 6, false, "Сладковатый корнеплод, традиционный для русской кухни", R.drawable.detailrepa,
                emptyMap(), null, "Корнеплод", "Апрель - Июнь", "Семенами", 1, 5, 20,
                "Регулярный", "Солнечное", "Фосфорные", "15-20°C", "45-60 дней", "Диаметр 5-10 см",
                "Совместима с луком", "Блошки", "Замачивание", "3-5 дней", "Не любит жару",
                "Рыхление", "Переувлажнение", "Супесчаная", "6.0-7.0", "После бобовых", "Все регионы"
            ),

            Item(
                R.drawable.defaultpatisson, "Патиссон", 7, false, "Необычный овощ для тушения и консервирования", R.drawable.detailpatisson,
                emptyMap(), null, "Овощ", "Май - Июнь", "Семенами", 2, 40, 60,
                "Умеренный", "Солнечное", "Органические", "20-25°C", "50-70 дней", "Молодые плоды (7-10 см)",
                "Совместим с кукурузой", "Слизни", "Прогревание", "7-10 дней", "Теплолюбив",
                "Регулярный сбор", "Переросшие плоды", "Плодородная", "6.0-6.8", "После зелени", "Все регионы"
            ),
            Item(
                R.drawable.defaultfasol, "Фасоль", 12, false, "Бобовая культура с высоким содержанием белка", R.drawable.detailfasol,
                emptyMap(), null, "Бобовые", "Май - Июнь", "Семенами", 1, 5, 15,
                "Умеренный", "Солнечное", "Калийные", "20-25°C", "70-100 дней", "При твердых стручках",
                "Совместима с огурцами", "Фасолевая зерновка", "Замачивание", "7-10 дней", "Боится заморозков",
                "Подвязка (вьющиеся сорта)", "Переувлажнение", "Рыхлая", "6.0-7.0", "После картофеля", "Все регионы"
            ),
            Item(
                R.drawable.defaultkukuruza, "Кукуруза", 15, false, "Сладкие початки для варки и гриля", R.drawable.detailkukuruza,
                emptyMap(), null, "Злаковые", "Май", "Семенами", 2, 70, 100,
                "Обильный", "Солнечное", "Азотные", "20-30°C", "90-120 дней", "При молочной спелости",
                "Совместима с тыквой", "Кукурузный мотылек", "Прогревание", "7-10 дней", "Теплолюбива",
                "Окучивание", "Недостаток света", "Плодородная", "5.5-7.0", "После бобовых", "Южные регионы, Средняя полоса"
            ),
            Item(
                R.drawable.defaultbrokkoli, "Брокколи", 20, false, "Полезная капуста с высоким содержанием витаминов", R.drawable.detailbrokkoli,
                emptyMap(), null, "Овощ", "Апрель - Май", "Рассадой", 1, 40, 60,
                "Регулярный", "Солнечное", "Азотные", "15-20°C", "80-100 дней", "До распускания соцветий",
                "Совместима с укропом", "Капустная белянка", "Закаливание", "7-10 дней", "Холодостойкая",
                "Удаление боковых побегов", "Жара", "Плодородная", "6.0-7.0", "После огурцов", "Все регионы"
            ),
            Item(
                R.drawable.defaultcvetnaya, "Цветная капуста", 18, false, "Нежная капуста для супов и запекания", R.drawable.detailcvetnaya,
                emptyMap(), null, "Овощ", "Апрель - Май", "Рассадой", 1, 50, 70,
                "Обильный", "Солнечное", "Борные", "15-20°C", "90-120 дней", "При плотной головке",
                "Совместима с сельдереем", "Капустная моль", "Обработка марганцовкой", "7-10 дней", "Требует стабильной температуры",
                "Притенение головки", "Недостаток бора", "Плодородная", "6.0-7.0", "После картофеля", "Средняя полоса, Юг"
            ),
            Item(
                R.drawable.defaultbrussels, "Брюссельская капуста", 25, false, "Мини-кочанчики с богатым вкусом", R.drawable.detailbrussels,
                emptyMap(), null, "Овощ", "Март - Апрель", "Рассадой", 1, 60, 90,
                "Умеренный", "Солнечное", "Фосфорные", "15-20°C", "120-150 дней", "После заморозков (вкус слаще)",
                "Совместима с шалфеем", "Капустная тля", "Закаливание", "10-14 дней", "Холодостойкая",
                "Удаление верхушки (для роста кочанчиков)", "Недостаток фосфора", "Плодородная", "6.0-7.0", "После бобовых", "Средняя полоса, Сибирь"
            ),
            Item(
                R.drawable.defaultkolrabi, "Кольраби", 12, false, "Стеблеплод с нежным вкусом", R.drawable.detailkolrabi,
                emptyMap(), null, "Овощ", "Апрель - Май", "Рассадой/семенами", 1, 30, 50,
                "Регулярный", "Солнечное", "Калийные", "15-20°C", "60-80 дней", "Диаметр 7-10 см",
                "Совместима с луком", "Крестоцветные блошки", "Замачивание", "7-10 дней", "Устойчива к холоду",
                "Рыхление", "Загущение", "Плодородная", "6.0-7.0", "После томатов", "Все регионы"
            ),
            Item(
                R.drawable.defaultshpinat, "Шпинат", 4, false, "Листовая зелень с высоким содержанием железа", R.drawable.detailshpinat,
                emptyMap(), null, "Зелень", "Апрель - Август", "Семенами", 1, 5, 20,
                "Обильный", "Полутень", "Азотные", "15-20°C", "30-45 дней", "До цветения",
                "Совместим с клубникой", "Тля", "Замачивание", "7-10 дней", "Быстро стрелкуется в жару",
                "Прореживание", "Засуха", "Рыхлая", "6.0-7.0", "После картофеля", "Все регионы"
            ),
            Item(
                R.drawable.defaultshavel, "Щавель", 3, false, "Кислая зелень для супов и пирогов", R.drawable.detailshavel,
                emptyMap(), null, "Зелень", "Апрель - Май", "Семенами", 1, 5, 15,
                "Обильный", "Полутень", "Азотные", "10-20°C", "40-60 дней", "Молодые листья",
                "Совместим с морковью", "Щавелевый листоед", "Замачивание", "10-14 дней", "Многолетний",
                "Обрезка цветоносов", "Пересыхание почвы", "Плодородная", "5.5-6.5", "После капусты", "Все регионы"
            ),
            Item(
                R.drawable.defaultsalat, "Салат листовой", 3, false, "Нежная зелень для салатов", R.drawable.detailsalat,
                emptyMap(), null, "Зелень", "Апрель - Сентябрь", "Семенами", 1, 5, 15,
                "Частый", "Полутень", "Азотные", "15-20°C", "30-50 дней", "По мере роста",
                "Совместим с редисом", "Слизни", "Замачивание", "5-7 дней", "Быстро стрелкуется",
                "Прореживание", "Жара", "Рыхлая", "6.0-7.0", "После огурцов", "Все регионы"
            ),
            Item(
                R.drawable.defaultrukkola, "Руккола", 3, false, "Пряная зелень с ореховым вкусом", R.drawable.detailrukkola,
                emptyMap(), null, "Зелень", "Апрель - Август", "Семенами", 1, 5, 15,
                "Умеренный", "Полутень", "Азотные", "15-22°C", "20-30 дней", "Молодые листья",
                "Совместима с томатами", "Крестоцветные блошки", "Замачивание", "3-5 дней", "Не любит жару",
                "Частый сбор", "Переувлажнение", "Рыхлая", "6.0-7.0", "После тыквенных", "Все регионы"
            ),
            Item(
                R.drawable.defaultbasil, "Базилик", 5, false, "Ароматная пряность для салатов и соусов", R.drawable.detailbasil,
                emptyMap(), null, "Зелень", "Май - Июнь", "Рассадой/семенами", 1, 20, 40,
                "Умеренный", "Солнечное", "Азотные", "20-25°C", "60-90 дней", "До цветения",
                "Совместим с томатами", "Тля", "Замачивание", "7-10 дней", "Теплолюбив",
                "Прищипка верхушки", "Переувлажнение", "Плодородная", "6.0-7.0", "После бобовых", "Южные регионы, теплицы"
            ),
            Item(
                R.drawable.defaultkinza, "Кинза", 4, false, "Пряная зелень с характерным запахом", R.drawable.detailkinza,
                emptyMap(), null, "Зелень", "Апрель - Август", "Семенами", 1, 5, 15,
                "Умеренный", "Солнечное", "Азотные", "15-20°C", "40-60 дней", "До цветения",
                "Совместима с огурцами", "Зонтичная моль", "Замачивание", "10-14 дней", "Быстро стрелкуется",
                "Прореживание", "Жара", "Рыхлая", "6.0-7.0", "После капусты", "Все регионы"
            ),
            Item(
                R.drawable.defaultmint, "Мята", 3, true, "Многолетняя ароматная трава для чая и десертов", R.drawable.detailmint,
                emptyMap(), null, "Зелень", "Апрель - Май", "Рассадой/корневищами", 2, 30, 50,
                "Обильный", "Полутень", "Органические", "18-22°C", "90-120 дней", "По мере роста",
                "Совместима с капустой", "Мятная блошка", "Деление куста", "—", "Агрессивно разрастается",
                "Обрезка", "Засуха", "Плодородная", "6.0-7.0", "После картофеля", "Все регионы"
            ),
            Item(
                R.drawable.defaultthyme, "Тимьян", 3, true, "Пряность с тонким ароматом для мяса и супов", R.drawable.detailthyme,
                emptyMap(), null, "Зелень", "Апрель - Май", "Рассадой/семенами", 1, 20, 30,
                "Редкий", "Солнечное", "Калийные", "20-25°C", "90-120 дней", "В период цветения",
                "Совместим с баклажанами", "Паутинный клещ", "Черенкование", "14-21 день", "Засухоустойчив",
                "Обрезка", "Переувлажнение", "Песчаная", "6.0-7.5", "После лука", "Южные регионы"
            ),
            Item(
                R.drawable.defaultrosemary, "Розмарин", 4, true, "Вечнозеленый кустарник для средиземноморской кухни", R.drawable.detailrosemary,
                emptyMap(), null, "Зелень", "Февраль - Март", "Рассадой/черенками", 2, 50, 70,
                "Редкий", "Солнечное", "Калийные", "20-28°C", "180-240 дней", "По мере роста",
                "Совместим с фасолью", "Белокрылка", "Укоренение черенков", "30-40 дней", "Не зимует в открытом грунте (кроме юга)",
                "Формировка куста", "Холод", "Щелочная", "7.0-7.8", "После зелени", "Южные регионы, горшки"
            ),
            Item(
                R.drawable.defaultwatermelon, "Арбуз", 10, false, "Сладкая ягода для летнего стола", R.drawable.detailwatermelon,
                emptyMap(), null, "Тыквенные", "Май", "Рассадой/семенами", 3, 80, 120,
                "Обильный", "Солнечное", "Калийные", "25-30°C", "80-100 дней", "При постукивании — глухой звук",
                "Совместим с кукурузой", "Бахчевая тля", "Прогревание семян", "7-10 дней", "Требует тепла",
                "Прищипка плетей", "Холодные ночи", "Песчаная", "6.0-6.8", "После гороха", "Юг России"
            ),
            Item(
                R.drawable.defaultmelon, "Дыня", 8, false, "Ароматный плод с медовым вкусом", R.drawable.detailmelon,
                emptyMap(), null, "Тыквенные", "Май", "Рассадой/семенами", 3, 70, 100,
                "Умеренный", "Солнечное", "Органические", "25-30°C", "90-120 дней", "При пожелтении кожуры",
                "Совместима с редисом", "Паутинный клещ", "Замачивание", "5-7 дней", "Не переносит заморозки",
                "Нормировка плодов", "Высокая влажность", "Супесчаная", "6.0-6.8", "После лука", "Астраханская, Ростовская области"
            ),
            Item(
                R.drawable.defaultartichoke, "Артишок", 15, true, "Декоративный и съедобный многолетник", R.drawable.detailartichoke,
                emptyMap(), null, "Овощ", "Март - Апрель", "Рассадой", 2, 100, 150,
                "Умеренный", "Солнечное", "Органические", "15-25°C", "120-180 дней", "До раскрытия бутонов",
                "Совместим с фасолью", "Тля", "Стратификация", "14-21 день", "Требует укрытия на зиму",
                "Удаление боковых побегов", "Застой воды", "Плодородная", "6.5-7.5", "После кабачков", "Краснодарский край"
            ),
            Item(
                R.drawable.defaultasparagus, "Спаржа", 20, true, "Многолетняя культура с деликатесными побегами", R.drawable.detailasparagus,
                emptyMap(), null, "Овощ", "Апрель - Май", "Корневищами", 3, 150, 200,
                "Обильный", "Солнечное", "Фосфорные", "15-25°C", "2-3 года (первый урожай)", "Побеги длиной 15-20 см",
                "Совместима с петрушкой", "Спаржевая трещалка", "Деление куста", "—", "Долгий срок выращивания",
                "Окучивание", "Кислая почва", "Супесчаная", "6.5-7.5", "После сидератов", "Юг, Средняя полоса"
            ),
            Item(
                R.drawable.defaultrhubarb, "Ревень", 10, true, "Многолетник с кислыми черешками для компотов", R.drawable.detailrhubarb,
                emptyMap(), null, "Овощ", "Апрель - Май", "Делением куста", 2, 60, 100,
                "Обильный", "Полутень", "Органические", "10-20°C", "На 2-й год", "Черешки толщиной 2-3 см",
                "Совместим с салатом", "Слизни", "Размножение корневищем", "—", "Морозостойкий",
                "Удаление цветоносов", "Жара", "Плодородная", "5.5-6.5", "После капусты", "Все регионы"
            ),
            Item(
                R.drawable.defaulthren, "Хрен", 5, true, "Острый корень для соусов и консервации", R.drawable.detailhren,
                emptyMap(), null, "Корнеплод", "Апрель - Май", "Корневыми черенками", 2, 50, 80,
                "Умеренный", "Полутень", "Калийные", "15-25°C", "120-150 дней", "Осенью",
                "Совместим с картофелем", "Капустная муха", "—", "—", "Агрессивно разрастается",
                "Контроль роста", "Тяжелая почва", "Суглинистая", "6.0-7.0", "После зелени", "Все регионы"
            ),
            Item(
                R.drawable.defaulttopinambur, "Топинамбур", 8, true, "Земляная груша с полезными клубнями", R.drawable.detailtopinambur,
                emptyMap(), null, "Клубнеплод", "Апрель - Май", "Клубнями", 3, 100, 150,
                "Редкий", "Солнечное", "Органические", "15-25°C", "120-180 дней", "После заморозков",
                "Совместим с фасолью", "Проволочник", "—", "—", "Зимостойкий",
                "Ограничение разрастания", "Застой воды", "Любая", "5.5-7.0", "После капусты", "Все регионы"
            ),
            Item(
                R.drawable.defaultbatat, "Батат", 12, false, "Сладкий картофель для запекания", R.drawable.detailbatat,
                emptyMap(), null, "Клубнеплод", "Май", "Рассадой (клубневыми ростками)", 3, 90, 120,
                "Умеренный", "Солнечное", "Калийные", "25-30°C", "120-150 дней", "Пожелтение листьев",
                "Совместим с перцем", "Хрущи", "Проращивание клубней", "30-40 дней", "Теплолюбив",
                "Прищипка плетей", "Холод", "Песчаная", "5.5-6.5", "После лука", "Кубань, Крым"
            ),
            Item(
                R.drawable.defaultporey, "Лук-порей", 15, false, "Нежный лук для супов и салатов", R.drawable.detailporey,
                emptyMap(), null, "Овощ", "Февраль - Март", "Рассадой", 1, 70, 90,
                "Обильный", "Солнечное", "Азотные", "15-25°C", "150-180 дней", "Толщина ножки 3-5 см",
                "Совместим с морковью", "Луковая муха", "Закаливание", "10-14 дней", "Холодостойкий",
                "Окучивание", "Недостаток влаги", "Плодородная", "6.0-7.0", "После бобовых", "Средняя полоса, Юг"
            ),
            Item(
                R.drawable.defaultshalot, "Лук-шалот", 10, false, "Семейный лук с деликатесным вкусом", R.drawable.detailshalot,
                emptyMap(), null, "Овощ", "Апрель/Октябрь", "Луковицами", 1, 30, 50,
                "Умеренный", "Солнечное", "Фосфорные", "15-25°C", "80-100 дней", "После полегания листьев",
                "Совместим с клубникой", "Нематода", "Прогревание", "7-10 дней", "Хранится до весны",
                "Прореживание", "Тень", "Рыхлая", "6.0-6.8", "После томатов", "Все регионы"
            ),
            Item(
                R.drawable.defaultcheremsha, "Черемша", 4, true, "Дикий чеснок с витаминными листьями", R.drawable.detailcheremsha,
                emptyMap(), null, "Зелень", "Апрель/Сентябрь", "Луковицами/семенами", 2, 30, 50,
                "Обильный", "Тень/полутень", "Органические", "10-20°C", "На 2-3 год", "До цветения",
                "Совместима с папоротниками", "Листоед", "Стратификация", "60-90 дней", "Растет в дикой природе",
                "Прореживание", "Засуха", "Влажная", "5.0-6.5", "После зелени", "Сибирь, Дальний Восток"
            ),
            Item(
                R.drawable.defaultkress, "Кресс-салат", 3, false, "Острая зелень с горчичным вкусом", R.drawable.detailkress,
                emptyMap(), null, "Зелень", "Апрель-Сентябрь", "Семенами", 1, 5, 10,
                "Частый", "Полутень", "Азотные", "15-18°C", "14-21 день", "Высота 8-10 см",
                "Совместим с редисом", "Блошки", "—", "2-3 дня", "Можно выращивать на подоконнике",
                "Сплошной посев", "Жара", "Рыхлая", "6.0-7.0", "После лука", "Все регионы"
            ),
            Item(
                R.drawable.defaultportulak, "Портулак", 3, false, "Сочные листья для салатов", R.drawable.detailportulak,
                emptyMap(), null, "Зелень", "Май-Июнь", "Семенами", 1, 5, 15,
                "Умеренный", "Солнечное", "Калийные", "20-25°C", "25-30 дней", "Молодые побеги",
                "Совместим с луком", "Тля", "—", "5-7 дней", "Засухоустойчив",
                "Прореживание", "Переувлажнение", "Песчаная", "5.5-6.5", "После картофеля", "Южные регионы"
            ),

            Item(
                R.drawable.defaultmangold, "Мангольд", 6, false, "Листовая свекла с цветными черешками", R.drawable.detailmangold,
                emptyMap(), null, "Зелень", "Апрель-Май", "Семенами", 1, 8, 30,
                "Обильный", "Солнечное", "Азотные", "16-20°C", "60-90 дней", "Листья 20-25 см",
                "Совместим с капустой", "Свекловичная блошка", "Замачивание", "7-10 дней", "Декоративный",
                "Срезка листьев", "Недостаток влаги", "Плодородная", "6.0-7.0", "После бобовых", "Все регионы"
            ),

            Item(
                R.drawable.defaultbaklashan, "Баклажан", 30, false, "Описание баклажана", R.drawable.detailbaklashan,
                emptyMap(), null, "Овощ", "Февраль - Март", "Рассадой", 1, 40, 60,
                "Частый", "Солнечное", "Азотные", "25-30°C", "110-130 дней", "Собирать по мере роста",
                "Совместим с луком", "Паутинный клещ", "Замачивание", "10-14 дней", "Чувствителен к холоду",
                "Удаление нижних листьев", "Переувлажнение", "Плодородная", "6.0-6.5", "После моркови", "Южные регионы"
            ),

            Item(
                R.drawable.defaultpeking, "Пекинская капуста", 12, false, "Нежный кочан для салатов", R.drawable.detailpeking,
                emptyMap(), null, "Овощ", "Апрель/Июль", "Семенами/рассадой", 1, 30, 50,
                "Обильный", "Полутень", "Азотные", "15-20°C", "50-70 дней", "Плотный кочан",
                "Совместима с горохом", "Крестоцветные блошки", "Закаливание", "5-7 дней", "Склонна к цветушности",
                "Укрытие от солнца", "Перепады температур", "Плодородная", "6.0-7.0", "После огурцов", "Все регионы"
            )

        )


        adapter = ItemAdapter(itemList, { item ->
            val intent = Intent(requireContext(), DetailActivity::class.java).apply {
                putExtra("title", item.title)
                putExtra("calories", item.calories)
                putExtra("imageResId", item.imageResId)
                putExtra("detailedDescription", item.detailedDescription)
                putExtra("detailedImageResId", item.detailedImageResId)

                putExtra("category", item.category)
                putExtra("plantingPeriod", item.plantingPeriod)
                putExtra("plantingMethod", item.plantingMethod)
                putExtra("depth", item.depth)
                putExtra("spacingBetween", item.spacingBetween)
                putExtra("rowSpacing", item.rowSpacing)

                putExtra("watering", item.watering)
                putExtra("lighting", item.lighting)
                putExtra("fertilizer", item.fertilizer)
                putExtra("temperature", item.temperature)
                putExtra("maturity", item.maturity)
                putExtra("harvestTips", item.harvestTips)

                putExtra("compatibility", item.compatibility)
                putExtra("diseases", item.diseases)

                putExtra("seedTreatment", item.seedTreatment)
                putExtra("germinationTime", item.germinationTime)
                putExtra("growthFeatures", item.growthFeatures)
                putExtra("pruning", item.pruning)
                putExtra("commonMistakes", item.commonMistakes)

                putExtra("soilType", item.soilType)
                putExtra("ph", item.pH)
                putExtra("cropRotation", item.cropRotation)

                putExtra("regionAdvice", item.regionAdvice)
            }
            startActivity(intent)
        }, requireContext())

        recyclerView.adapter = adapter
        recyclerView.layoutManager = GridLayoutManager(requireContext(), 2)

        val searchListener = object : SearchView.OnQueryTextListener {
            override fun onQueryTextSubmit(query: String?) = false

            override fun onQueryTextChange(newText: String?): Boolean {
                val query = newText.orEmpty().lowercase()
                val filtered = itemList.filter {
                    it.title.lowercase().contains(query)
                }
                adapter.updateItems(filtered)
                return true
            }
        }

        binding.searchView.setOnQueryTextListener(searchListener)

        binding.btnAll.setOnClickListener {
            adapter.updateItems(itemList)
        }

        binding.btnFavorites.setOnClickListener {
            val favorites = itemList.filter { item ->
                requireContext().getSharedPreferences("favorites", 0)
                    .getBoolean(item.title, false)
            }
            adapter.updateItems(favorites)
        }

        return root
    }

    override fun onDestroyView() {
        super.onDestroyView()
        _binding = null
    }
}
